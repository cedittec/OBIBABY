#routine for obibaby
#

if ps -ef | grep -v grep | grep obibaby_main ; 
then
	echo "Already running"
    exit 0
fi

COMMAND=$0

if ps -ef | grep -v grep | grep ${COMMAND} ; 
then
	echo "Already running"
    exit 0
fi

#Exit if the script is already running
RUNNING=`ps --no-headers -C${COMMAND} | wc -l`
if [ ${RUNNING} -gt 1 ]; 
then
	echo "Already running"
	exit 1
fi

echo "$(date '+%Y/%M/%D %H:%M:%S')-> ${COMMAND} was callen" >> /home/pi/Desktop/log.txt

#rm -R /home/pi/Desktop/obibaby\
#git clone 'https://github.com/cedittec/obibaby' /home/pi/Desktop/obibaby

#finish other processess with python
sudo killall python


#python /home/pi/Desktop/obibaby/actualizar.py & 
#update_data &
#update_streaming

while true;
do
	if ps -ef | grep -v grep | grep main.py ; 
	then
		echo "Already up the main.py"
		break
	else
		sudo python /home/pi/Desktop/obibaby/src/main.py
	fi
done &
while true;
do
	if ps -ef | grep -v grep | grep updateDisplay.py  ; 
	then
		echo "Already up the updateDisplay.py"
		break
	else
		sudo python /home/pi/Desktop/obibaby/src/updateDisplay.py
	fi
done